<%= form_with(model: form, local: true) do |f| %>

  <%= display_error_validations form %>

  <fieldset>
    <div class="mb-3">
      <%= f.label :title, class: "form-label", for: "form-title" %>
      <%= f.text_field :title, class: "form-control", placeholder: "Title", id: "form-title" %>
    </div>
    <div class="mb-3">
      <%= f.label :name, class: "form-label", for: "form-name" %>
      <%= f.text_field :name, class: "form-control", placeholder: "Name", id: "form-name" %>
    </div>
    <div class="mb-3">
      <%= f.label :description, class: "form-label", for: "form-description" %>
      <%= f.text_area :description, class: "form-control", placeholder: "Description", id: "form-description" %>
    </div>

    <div class="mb-3">
      <%= f.check_box :step, class: "form-check-input" %>
      <%= f.label "Step", class: "form-check-label", id: "step-form" %>
    </div>


    <hr />
   <div class="mt-4">
      <%= f.submit class: "btn btn-primary" %>
    </div>
  </fieldset>


<% end %>

<%= content_for :javascript do %>
<script>
  document.addEventListener("turbolinks:load", function() {
    if($('<%= "##{field.name}" %> > .nested_form').length > 0) {
      $('<%= "##{field.name}" %> .links a.add_fields').hide();
    }

    $(document)
      .on('cocoon:before-insert', '<%= "##{field.name}" %>', function() {
        $('<%= "##{field.name}" %> .links a.add_fields').hide();
      })
      .on("cocoon:before-remove", '<%= "##{field.name}" %>', function() {
        $('<%= "##{field.name}" %> .links a.add_fields').show();
      })
  });
</script>